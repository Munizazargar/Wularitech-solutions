@model List<WularItech_solutions.Models.CartViewModel>
@if (TempData["Error"] != null)
{
    <div class="alert-wrapper">
        <div class="custom-alert">
            @TempData["Error"]
        </div>
    </div>
}
@if (TempData["Error"] != null)
{
    <div class="alert-wrapper">
        <div class="custom-alert error">
            @TempData["Error"]
        </div>
    </div>
}
@section Styles {
    <link rel="stylesheet" href="~/css/cart.css" />
}

@{
    ViewData["Title"] = "Your Cart";
}




<div class="cart-container">

    <h2 class="cart-title">Your Shopping Cart</h2>

    @if (!Model.Any())
    {
        <div class="cart-empty">
            <h4>Your cart is empty</h4>
            <p>Looks like you haven’t added anything yet.</p>
        </div>
    }
    else
    {
        <div class="cart-layout">

            <!-- LEFT SIDE: ITEMS -->
            <div class="cart-items">

                @foreach (var item in Model)
                {
                    <div class="cart-item">

                        <div class="cart-item-image">
                            @if (!string.IsNullOrEmpty(item.ProductImage))
                            {
                                <img src="@item.ProductImage" alt="@item.ProductName" />
                            }
                            else
                            {
                                <div class="no-image">No Image</div>
                            }
                        </div>

                        <div class="cart-item-details">
                            <h5>@item.ProductName</h5>

                            <p class="cart-price">₹@item.ProductPrice</p>

                            <div class="quantity-controls">

                                <form asp-action="DecreaseQuantity" method="post">
                                    <input type="hidden" name="productId" value="@item.ProductId" />
                                    <button type="submit" @(item.Quantity <= 1 ? "disabled" : "")>-</button>
                                </form>

                                <span>@item.Quantity</span>

                                <form asp-action="IncreaseQuantity" method="post">
                                    <input type="hidden" name="productId" value="@item.ProductId" />
                                    <button type="submit" @(item.Quantity >= item.Stock ? "disabled" : "")>+</button>
                                </form>

                            </div>

                            <p class="item-total">
                                Total: ₹@item.TotalPrice
                            </p>

                            <form asp-action="RemoveFromCart" method="post">
                                <input type="hidden" name="productId" value="@item.ProductId" />
                                <button type="submit" class="remove-btn">
                                    Remove
                                </button>
                            </form>

                        </div>

                    </div>
                }

            </div>

            <!-- RIGHT SIDE: SUMMARY -->
            <div class="cart-summary">

                <h4>Order Summary</h4>

                <div class="summary-row">
                    <span>Subtotal</span>
                    <span>₹@Model.Sum(x => x.TotalPrice)</span>
                </div>

                <div class="summary-row total">
                    <span>Total</span>
                    <span>₹@Model.Sum(x => x.TotalPrice)</span>
                </div>

                <button class="checkout-btn">
                    Proceed to Checkout
                </button>

            </div>

        </div>
    }

</div>
